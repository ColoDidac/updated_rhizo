{"ast":null,"code":"import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Dataset } from '../dataset';\nimport { Endpoint } from '../endpoint';\nimport { EndpointService } from '../endpoint.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"../endpoint.service\";\nimport * as i3 from \"@angular/forms\";\nexport let DatasetFormModalComponent = /*#__PURE__*/(() => {\n  class DatasetFormModalComponent {\n    constructor(activeModal, endpointService) {\n      this.activeModal = activeModal;\n      this.endpointService = endpointService;\n      this.file = null;\n      this.isLoading = false;\n      this.isReplacement = false;\n    }\n\n    onFileChange(event) {\n      this.file = event.target.files.item(0);\n      const extension = this.file.name.split('.')[1];\n\n      switch (extension) {\n        case 'ttl':\n          this.file['content-type'] = 'text/turtle';\n          break;\n\n        case 'rdf':\n          this.file['content-type'] = 'application/rdf+xml';\n          break;\n\n        case 'owl':\n          this.file['content-type'] = 'application/rdf+xml';\n          break;\n\n        case 'n3':\n          this.file['content-type'] = 'text/n3';\n          break;\n\n        case 'nt':\n          this.file['content-type'] = 'application/n-triples';\n          break;\n\n        case 'nq':\n          this.file['content-type'] = 'application/n-quads';\n          break;\n\n        case 'json':\n          this.file['content-type'] = 'application/ld+json';\n          break;\n\n        case 'jsonld':\n          this.file['content-type'] = 'application/ld+json';\n          break;\n\n        default:\n          this.file['content-type'] = 'text/turtle';\n      }\n    }\n\n    onSubmit() {\n      if (this.isReplacement) {\n        this.endpointService.replaceData(this.dataset.id, this.endpoint.id, this.graph, this.file).subscribe({\n          next: () => {\n            this.isLoading = false;\n            this.activeModal.close();\n          },\n          error: error => {\n            this.isLoading = false;\n            this.activeModal.close();\n            console.log(error);\n          }\n        });\n      } else {\n        this.endpointService.storeData(this.dataset.id, this.endpoint.id, this.graph, this.file).subscribe({\n          next: () => {\n            this.isLoading = false;\n            this.activeModal.close();\n          },\n          error: error => {\n            this.isLoading = false;\n            this.activeModal.close();\n            console.log(error);\n          }\n        });\n      }\n    }\n\n  }\n\n  DatasetFormModalComponent.ɵfac = function DatasetFormModalComponent_Factory(t) {\n    return new (t || DatasetFormModalComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal), i0.ɵɵdirectiveInject(i2.EndpointService));\n  };\n\n  DatasetFormModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DatasetFormModalComponent,\n    selectors: [[\"app-dataset-form-modal\"]],\n    inputs: {\n      dataset: \"dataset\",\n      endpoint: \"endpoint\",\n      graph: \"graph\"\n    },\n    decls: 35,\n    vars: 4,\n    consts: [[\"id\", \"dataset-form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [1, \"form-group\"], [\"for\", \"dataset\", 1, \"control-label\"], [\"id\", \"dataset\", \"name\", \"dataset\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"for\", \"graph\", 1, \"control-label\"], [\"id\", \"graph\", \"name\", \"graph\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"for\", \"replace\", 1, \"control-label\"], [1, \"form-check\"], [\"id\", \"replace\", \"name\", \"replace\", \"type\", \"checkbox\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-check-label\", \"small\", \"alert-warning\"], [\"for\", \"file\", 1, \"control-label\"], [\"id\", \"file\", \"name\", \"file\", \"type\", \"file\", 1, \"form-control\", 3, \"change\"], [1, \"modal-footer\"], [\"id\", \"submit\", \"type\", \"submit\", 1, \"btn\", \"m-1\", \"btn-success\", \"pull-right\", 3, \"disabled\"], [\"id\", \"cancel\", \"type\", \"button\", 1, \"btn\", \"m-1\", \"btn-outline-primary\", \"pull-right\", 3, \"click\"]],\n    template: function DatasetFormModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0, 1);\n        i0.ɵɵlistener(\"ngSubmit\", function DatasetFormModalComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(2, \"fieldset\");\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"h4\", 3);\n        i0.ɵɵtext(5, \"Load Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function DatasetFormModalComponent_Template_button_click_6_listener() {\n          return ctx.activeModal.dismiss(\"Cross click\");\n        });\n        i0.ɵɵelementStart(7, \"span\", 5);\n        i0.ɵɵtext(8, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"label\", 8);\n        i0.ɵɵtext(12, \"Destination Dataset\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 7);\n        i0.ɵɵelementStart(15, \"label\", 10);\n        i0.ɵɵtext(16, \"Destination Graph\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 7);\n        i0.ɵɵelementStart(19, \"label\", 12);\n        i0.ɵɵtext(20, \"Replace Existing Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 13);\n        i0.ɵɵelementStart(22, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function DatasetFormModalComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.isReplacement = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"label\", 15);\n        i0.ɵɵtext(24, \"Warning! When checked, the existing data in the graph will be removed\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 7);\n        i0.ɵɵelementStart(26, \"label\", 16);\n        i0.ɵɵtext(27, \"Source File\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 17);\n        i0.ɵɵlistener(\"change\", function DatasetFormModalComponent_Template_input_change_28_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 18);\n        i0.ɵɵelementStart(30, \"div\", 7);\n        i0.ɵɵelementStart(31, \"button\", 19);\n        i0.ɵɵtext(32, \"Submit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function DatasetFormModalComponent_Template_button_click_33_listener() {\n          return ctx.activeModal.close(\"Close click\");\n        });\n        i0.ɵɵtext(34, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n\n        i0.ɵɵadvance(13);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.dataset.id);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.graph);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.isReplacement);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n    encapsulation: 2\n  });\n  return DatasetFormModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}