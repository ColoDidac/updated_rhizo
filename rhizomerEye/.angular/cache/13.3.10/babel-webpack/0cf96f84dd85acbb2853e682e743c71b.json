{"ast":null,"code":"import { Description } from './description';\nimport { UriUtils } from '../shared/uriutils';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ClassService } from '../class/class.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ngx-translate/core\";\nimport * as i3 from \"../class/class.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction DescriptionComponent_div_0_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 10);\n    i0.ɵɵlistener(\"click\", function DescriptionComponent_div_0_img_1_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.clickDescriptionDepiction();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"expanded\", ctx_r1.depictionExpanded);\n    i0.ɵɵproperty(\"src\", ctx_r1.description.depiction[0].asString(), i0.ɵɵsanitizeUrl);\n  }\n}\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nconst _c1 = function (a0) {\n  return {\n    uri: a0\n  };\n};\n\nfunction DescriptionComponent_div_0_b_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\", 11);\n    i0.ɵɵelementStart(1, \"a\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"title\", ctx_r2.description[\"@id\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, ctx_r2.resource))(\"queryParams\", i0.ɵɵpureFunction1(6, _c1, ctx_r2.description[\"@id\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.description.label || ctx_r2.description[\"@id\"]);\n  }\n}\n\nfunction DescriptionComponent_div_0_b_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.description.label);\n  }\n}\n\nfunction DescriptionComponent_div_0_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵlistener(\"click\", function DescriptionComponent_div_0_span_6_Template_span_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const type_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.browseClass(type_r8.uri);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r8 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"title\", type_r8.uri);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.localName(type_r8.label), \" \");\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_app_description_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-description\", 16);\n  }\n\n  if (rf & 2) {\n    const value_r13 = i0.ɵɵnextContext().$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"datasetId\", ctx_r15.datasetId)(\"resource\", ctx_r15.resource)(\"description\", ctx_r15.getAnonResource(value_r13))(\"anonDescriptions\", ctx_r15.anonDescriptions);\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_span_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \", \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_span_2_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"a\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const value_r13 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, ctx_r19.resource))(\"queryParams\", i0.ɵɵpureFunction1(5, _c1, value_r13.uri));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(value_r13.label);\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_span_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"a\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const value_r13 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"href\", value_r13.value, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(value_r13.value);\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_span_2_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const value_r13 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(value_r13.value);\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, DescriptionComponent_div_0_li_8_span_4_span_2_span_1_Template, 2, 0, \"span\", 6);\n    i0.ɵɵtemplate(2, DescriptionComponent_div_0_li_8_span_4_span_2_span_2_Template, 3, 7, \"span\", 6);\n    i0.ɵɵtemplate(3, DescriptionComponent_div_0_li_8_span_4_span_2_span_3_Template, 3, 2, \"span\", 6);\n    i0.ɵɵtemplate(4, DescriptionComponent_div_0_li_8_span_4_span_2_span_4_Template, 2, 1, \"span\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext();\n    const firstValue_r14 = ctx_r25.first;\n    const value_r13 = ctx_r25.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !firstValue_r14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", value_r13.uri);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", value_r13 == null ? null : value_r13.isUrlValue());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(value_r13 == null ? null : value_r13.isUrlValue()));\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, DescriptionComponent_div_0_li_8_span_4_app_description_1_Template, 1, 4, \"app-description\", 15);\n    i0.ɵɵtemplate(2, DescriptionComponent_div_0_li_8_span_4_span_2_Template, 5, 4, \"span\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const value_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", value_r13.isAnon());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !value_r13.isAnon());\n  }\n}\n\nfunction DescriptionComponent_div_0_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"b\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \": \");\n    i0.ɵɵtemplate(4, DescriptionComponent_div_0_li_8_span_4_Template, 3, 2, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const property_r11 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMapInterpolate1(\"list-group-item small \", property_r11.uri, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", property_r11.uri);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(property_r11.label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", property_r11.filterLangValues(ctx_r5.translate.currentLang));\n  }\n}\n\nfunction DescriptionComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, DescriptionComponent_div_0_img_1_Template, 1, 3, \"img\", 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"p\", 4);\n    i0.ɵɵtemplate(4, DescriptionComponent_div_0_b_4_Template, 3, 8, \"b\", 5);\n    i0.ɵɵtemplate(5, DescriptionComponent_div_0_b_5_Template, 2, 1, \"b\", 6);\n    i0.ɵɵtemplate(6, DescriptionComponent_div_0_span_6_Template, 2, 2, \"span\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\", 8);\n    i0.ɵɵtemplate(8, DescriptionComponent_div_0_li_8_Template, 5, 6, \"li\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description.depiction.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"reverse-text-truncate\", !ctx_r0.description.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.description.isAnon());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description.isAnon() && ctx_r0.description.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.description[\"@type\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.description.properties);\n  }\n}\n\nexport let DescriptionComponent = /*#__PURE__*/(() => {\n  class DescriptionComponent {\n    constructor(router, activatedRoute, translate, classService) {\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.translate = translate;\n      this.classService = classService;\n      this.description = new Description();\n      this.anonDescriptions = new Map();\n      this.labels = new Map();\n      this.resource = 'resource';\n      this.details = false;\n      this.depictionExpanded = false;\n    }\n\n    getAnonResource(value) {\n      return this.anonDescriptions.get(value.asString());\n    }\n\n    clickDescriptionDepiction() {\n      if (this.details) {\n        this.depictionExpanded = !this.depictionExpanded;\n      } else {\n        this.router.navigate([this.resource], {\n          queryParams: {\n            uri: this.description['@id']\n          },\n          relativeTo: this.activatedRoute\n        });\n      }\n    }\n\n    localName(uri) {\n      return UriUtils.localName(uri);\n    }\n\n    browseClass(uri) {\n      this.classService.getClassCurie(this.datasetId, uri).subscribe(cls => {\n        if (this.datasetId === 'default') {\n          this.router.navigate(['/overview', cls.curie]);\n        } else {\n          this.router.navigate(['/datasets', this.datasetId, cls.curie]);\n        }\n      });\n    }\n\n  }\n\n  DescriptionComponent.ɵfac = function DescriptionComponent_Factory(t) {\n    return new (t || DescriptionComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TranslateService), i0.ɵɵdirectiveInject(i3.ClassService));\n  };\n\n  DescriptionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DescriptionComponent,\n    selectors: [[\"app-description\"]],\n    inputs: {\n      datasetId: \"datasetId\",\n      description: \"description\",\n      anonDescriptions: \"anonDescriptions\",\n      labels: \"labels\",\n      resource: \"resource\",\n      details: \"details\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"card mb-2\", 4, \"ngIf\"], [1, \"card\", \"mb-2\"], [\"class\", \"card-img-top\", \"style\", \"cursor: pointer\", \"alt\", \"resource depiction\", 3, \"expanded\", \"src\", \"click\", 4, \"ngIf\"], [1, \"card-header\"], [1, \"card-text\"], [3, \"title\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"badge badge-secondary badge-pill pull-right mt-1\", \"style\", \"cursor: pointer\", 3, \"title\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"list-group-flush\"], [3, \"class\", 4, \"ngFor\", \"ngForOf\"], [\"alt\", \"resource depiction\", 1, \"card-img-top\", 2, \"cursor\", \"pointer\", 3, \"src\", \"click\"], [3, \"title\"], [3, \"routerLink\", \"queryParams\"], [1, \"badge\", \"badge-secondary\", \"badge-pill\", \"pull-right\", \"mt-1\", 2, \"cursor\", \"pointer\", 3, \"title\", \"click\"], [4, \"ngFor\", \"ngForOf\"], [3, \"datasetId\", \"resource\", \"description\", \"anonDescriptions\", 4, \"ngIf\"], [3, \"datasetId\", \"resource\", \"description\", \"anonDescriptions\"], [3, \"href\"]],\n    template: function DescriptionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DescriptionComponent_div_0_Template, 9, 7, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.description);\n      }\n    },\n    directives: [i4.NgIf, i1.RouterLinkWithHref, i4.NgForOf, DescriptionComponent],\n    styles: [\".card-img-top[_ngcontent-%COMP%]{height:100px;-o-object-fit:cover;object-fit:cover}.expanded[_ngcontent-%COMP%]{height:auto}.reverse-text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;direction:rtl}li.http\\\\:\\\\/\\\\/www\\\\.w3\\\\.org\\\\/2000\\\\/01\\\\/rdf-schema\\\\#label[_ngcontent-%COMP%], li[class*=wikiPage][_ngcontent-%COMP%]{display:none}\"]\n  });\n  return DescriptionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}